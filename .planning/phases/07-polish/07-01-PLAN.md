---
phase: 07-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - package-lock.json
  - src/styles/index.css
autonomous: true

must_haves:
  truths:
    - "User can run npm run dev without dependency errors for skeleton and error boundary packages"
    - "User sees modal open/close with smooth fade + scale animation"
    - "User sees visible focus ring when tabbing to interactive elements"
  artifacts:
    - path: "package.json"
      provides: "Dependencies for skeleton and error boundary"
      contains: "react-loading-skeleton"
    - path: "src/styles/index.css"
      provides: "Modal animation CSS and focus ring utility"
      contains: "@starting-style"
  key_links:
    - from: "src/styles/index.css"
      to: "dialog elements"
      via: "CSS selector dialog"
      pattern: "dialog\\[open\\]"
---

<objective>
Install polish dependencies and add CSS foundation for modal animations and focus states.

Purpose: Establish the styling infrastructure that all polish features depend on.
Output: npm dependencies installed, CSS with modal animations and focus ring utility.
</objective>

<execution_context>
@/Users/ericgreene/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ericgreene/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-polish/07-RESEARCH.md
@src/styles/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies</name>
  <files>package.json, package-lock.json</files>
  <action>
Install react-loading-skeleton and react-error-boundary:
```bash
npm install react-loading-skeleton react-error-boundary
```
These provide skeleton loaders with shimmer animation and error boundary with hooks API.
  </action>
  <verify>`npm ls react-loading-skeleton react-error-boundary` shows both installed</verify>
  <done>Both packages appear in package.json dependencies</done>
</task>

<task type="auto">
  <name>Task 2: Add modal animation CSS with @starting-style</name>
  <files>src/styles/index.css</files>
  <action>
Add CSS for dialog animations after the existing @layer utilities section:

```css
/* Dialog animations using @starting-style */
dialog {
  opacity: 0;
  transform: scale(0.95) translateY(-10px);
  transition:
    opacity 0.2s ease-out,
    transform 0.2s ease-out,
    overlay 0.2s allow-discrete,
    display 0.2s allow-discrete;
}

dialog[open] {
  opacity: 1;
  transform: scale(1) translateY(0);
}

@starting-style {
  dialog[open] {
    opacity: 0;
    transform: scale(0.95) translateY(-10px);
  }
}

/* Backdrop animation */
dialog::backdrop {
  background-color: transparent;
  transition: background-color 0.2s ease-out;
}

dialog[open]::backdrop {
  background-color: rgb(0 0 0 / 50%);
}

@starting-style {
  dialog[open]::backdrop {
    background-color: transparent;
  }
}
```

IMPORTANT: Place @starting-style AFTER the dialog[open] rule. Order matters for CSS specificity.
  </action>
  <verify>Manually open app, click a citation to open modal, observe smooth fade+scale animation on open and close</verify>
  <done>Modals animate smoothly on open (fade in + scale up) and close (fade out + scale down)</done>
</task>

<task type="auto">
  <name>Task 3: Add focus ring utility class</name>
  <files>src/styles/index.css</files>
  <action>
Add to the existing @layer utilities section in src/styles/index.css:

```css
.focus-ring {
  @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-violet focus-visible:ring-offset-2;
}
```

This provides a consistent, visible focus indicator for keyboard navigation. Uses the existing violet color from the Geist palette.
  </action>
  <verify>Search for `.focus-ring` in index.css confirms it exists</verify>
  <done>Focus ring utility class available for use on interactive elements</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Dev server starts without CSS parsing errors
3. Opening CitationModal shows smooth animation (not instant appear/disappear)
4. `grep -c "@starting-style" src/styles/index.css` returns 2 (dialog and backdrop)
</verification>

<success_criteria>
- react-loading-skeleton 3.5.0+ and react-error-boundary 6.1.0+ installed
- Modal animations work with smooth fade+scale transitions
- Focus ring utility class defined in CSS
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish/07-01-SUMMARY.md`
</output>
