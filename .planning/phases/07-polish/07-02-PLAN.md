---
phase: 07-polish
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - src/components/feedback/Skeleton/Skeleton.jsx
  - src/components/feedback/Skeleton/index.js
  - src/components/feedback/ErrorFallback/ErrorFallback.jsx
  - src/components/feedback/ErrorFallback/index.js
  - src/components/feedback/index.js
autonomous: true

must_haves:
  truths:
    - "User sees AI response placeholder with shimmer animation while waiting for streaming to start"
    - "User sees friendly error message with retry button when errors occur"
  artifacts:
    - path: "src/components/feedback/Skeleton/Skeleton.jsx"
      provides: "ChatMessageSkeleton component for AI response loading"
      exports: ["ChatMessageSkeleton"]
    - path: "src/components/feedback/ErrorFallback/ErrorFallback.jsx"
      provides: "Error fallback UI for error boundaries"
      exports: ["ErrorFallback", "ChatErrorFallback"]
    - path: "src/components/feedback/index.js"
      provides: "Barrel export for feedback components"
  key_links:
    - from: "src/components/feedback/Skeleton/Skeleton.jsx"
      to: "react-loading-skeleton"
      via: "import Skeleton"
      pattern: "import Skeleton from 'react-loading-skeleton'"
---

<objective>
Create skeleton loader components and error fallback UI for graceful degradation.

Purpose: Provide visual feedback during loading and graceful error handling.
Output: Skeleton components for cards/chat and ErrorFallback components for boundaries.
</objective>

<execution_context>
@/Users/ericgreene/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ericgreene/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-polish/07-RESEARCH.md
@src/components/cards/ManagerCard/ManagerCard.jsx
@src/components/chat/ChatMessage/ChatMessage.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Skeleton components</name>
  <files>src/components/feedback/Skeleton/Skeleton.jsx, src/components/feedback/Skeleton/index.js</files>
  <action>
Create src/components/feedback/Skeleton/Skeleton.jsx with ChatMessageSkeleton:

```jsx
// Skeleton components for loading states
import Skeleton from 'react-loading-skeleton';
import 'react-loading-skeleton/dist/skeleton.css';

/**
 * ChatMessageSkeleton - Placeholder shown while waiting for AI response to start streaming
 * Matches ChatMessage layout structure (avatar + content area)
 */
export function ChatMessageSkeleton() {
  return (
    <div className="flex gap-3">
      <Skeleton circle width={32} height={32} />
      <div className="flex-1">
        <Skeleton width={100} height={14} className="mb-2" />
        <Skeleton count={3} />
        <Skeleton width="80%" />
      </div>
    </div>
  );
}
```

NOTE: ManagerCardSkeleton is intentionally omitted. Dashboard data loads from static managers.js (no async fetch), so skeleton loaders for the card grid would never be visible. The ChatMessageSkeleton is the only skeleton needed - it shows before AI streaming begins.

Create barrel export src/components/feedback/Skeleton/index.js:
```js
export { ChatMessageSkeleton } from './Skeleton';
```
  </action>
  <verify>Import and render ChatMessageSkeleton in ChatThread, observe shimmer animation</verify>
  <done>ChatMessageSkeleton renders with avatar circle and text lines with shimmer</done>
</task>

<task type="auto">
  <name>Task 2: Create ErrorFallback components</name>
  <files>src/components/feedback/ErrorFallback/ErrorFallback.jsx, src/components/feedback/ErrorFallback/index.js</files>
  <action>
Create src/components/feedback/ErrorFallback/ErrorFallback.jsx:

```jsx
// Error fallback components for error boundaries

/**
 * Generic error fallback with retry capability
 */
export function ErrorFallback({ error, resetErrorBoundary }) {
  return (
    <div className="bg-red-50 border border-red-200 rounded-lg p-6 text-center">
      <div className="text-red-600 mb-2">
        <svg className="w-10 h-10 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
        </svg>
      </div>
      <h3 className="text-lg font-semibold text-gray-900 mb-1">Something went wrong</h3>
      <p className="text-sm text-gray-600 mb-4">
        {error?.message || 'An unexpected error occurred'}
      </p>
      {resetErrorBoundary && (
        <button
          onClick={resetErrorBoundary}
          className="bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors focus-ring"
        >
          Try again
        </button>
      )}
    </div>
  );
}

/**
 * Chat-specific error fallback with context-aware messaging
 */
export function ChatErrorFallback({ error, resetErrorBoundary }) {
  const isApiError = error?.message?.includes('API') || error?.message?.includes('401') || error?.message?.includes('403');

  return (
    <div className="bg-red-50 border border-red-200 rounded-lg p-4">
      <div className="flex items-start gap-3">
        <svg className="w-5 h-5 text-red-500 mt-0.5 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <div className="flex-1">
          <p className="text-sm font-medium text-red-800">
            {isApiError ? 'Unable to connect to Claude' : 'Chat error'}
          </p>
          <p className="text-sm text-red-600 mt-1">
            {isApiError
              ? 'Please check your API key and try again.'
              : (error?.message || 'Something went wrong with the chat.')}
          </p>
          {resetErrorBoundary && (
            <button
              onClick={resetErrorBoundary}
              className="mt-3 text-sm text-red-700 underline hover:text-red-800"
            >
              Retry
            </button>
          )}
        </div>
      </div>
    </div>
  );
}
```

Create barrel export src/components/feedback/ErrorFallback/index.js:
```js
export { ErrorFallback, ChatErrorFallback } from './ErrorFallback';
```
  </action>
  <verify>ErrorFallback renders with error icon, message, and retry button</verify>
  <done>ErrorFallback and ChatErrorFallback components render appropriate error UI</done>
</task>

<task type="auto">
  <name>Task 3: Create feedback components barrel export</name>
  <files>src/components/feedback/index.js</files>
  <action>
Create src/components/feedback/index.js to export all feedback components:

```js
export { ChatMessageSkeleton } from './Skeleton';
export { ErrorFallback, ChatErrorFallback } from './ErrorFallback';
```
  </action>
  <verify>Import { ManagerCardSkeleton, ErrorFallback } from '@/components/feedback' works</verify>
  <done>All feedback components exportable from single barrel file</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. ChatMessageSkeleton shows avatar circle and text lines with shimmer
3. ErrorFallback shows icon, message, and clickable retry button
4. ChatErrorFallback detects API errors and shows appropriate message
</verification>

<success_criteria>
- ChatMessageSkeleton renders with shimmer animation (avatar + text lines)
- ErrorFallback components show user-friendly messages
- Retry buttons are focusable and have hover states
- All components use Tailwind classes consistent with project
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish/07-02-SUMMARY.md`
</output>
