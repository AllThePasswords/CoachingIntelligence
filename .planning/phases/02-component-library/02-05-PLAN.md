---
phase: 02-component-library
plan: 05
type: execute
wave: 3
depends_on: ["02-02", "02-03", "02-04"]
files_modified:
  - src/components/cards/ManagerCard/ManagerCard.jsx
  - src/components/cards/ManagerCard/index.js
  - src/components/cards/index.js
  - src/components/sections/InsightSection/InsightSection.jsx
  - src/components/sections/InsightSection/index.js
  - src/components/sections/index.js
autonomous: true

must_haves:
  truths:
    - "ManagerCard displays name, region, metrics, trend badge, AI summary, and action button"
    - "ManagerCard updates when timeframe changes"
    - "InsightSection displays title, optional badge, and content"
  artifacts:
    - path: "src/components/cards/ManagerCard/ManagerCard.jsx"
      provides: "Complete manager card composite component"
      exports: ["ManagerCard"]
    - path: "src/components/sections/InsightSection/InsightSection.jsx"
      provides: "Titled section with optional rating"
      exports: ["InsightSection"]
    - path: "src/components/cards/index.js"
      provides: "Cards barrel export"
      exports: ["ManagerCard"]
    - path: "src/components/sections/index.js"
      provides: "Sections barrel export"
      exports: ["InsightSection"]
  key_links:
    - from: "src/components/cards/ManagerCard/ManagerCard.jsx"
      to: "src/components/ui"
      via: "import Badge"
      pattern: "import.*Badge.*from.*@/components/ui"
    - from: "src/components/cards/ManagerCard/ManagerCard.jsx"
      to: "src/components/display"
      via: "import MetricDisplay"
      pattern: "import.*MetricDisplay.*from.*@/components/display"
    - from: "src/components/cards/ManagerCard/ManagerCard.jsx"
      to: "src/stores"
      via: "useTimeframeStore for data filtering"
      pattern: "import.*useTimeframeStore.*from.*@/stores"
---

<objective>
Create composite components: ManagerCard (the main dashboard card showing manager info) and InsightSection (for detail page insight blocks).

Purpose: ManagerCard is the primary interactive element on the Dashboard. InsightSection is used repeatedly on Manager Detail pages for each coaching dimension.
Output: Working ManagerCard with all subcomponents, InsightSection with title/badge/content.
</objective>

<execution_context>
@/Users/ericgreene/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ericgreene/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-component-library/02-RESEARCH.md

# Components to compose
@src/components/ui/index.js
@src/components/display/index.js
@src/stores/index.js

# Source patterns
@src/App.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ManagerCard composite component</name>
  <files>
    src/components/cards/ManagerCard/ManagerCard.jsx
    src/components/cards/ManagerCard/index.js
    src/components/cards/index.js
  </files>
  <action>
1. Create `src/components/cards/ManagerCard/` directory

2. Create `src/components/cards/ManagerCard/ManagerCard.jsx`:
   - Import dependencies:
     ```javascript
     import { Badge } from '@/components/ui';
     import { MetricDisplay } from '@/components/display';
     import { useTimeframeStore } from '@/stores';
     import { getTimeframeData } from '@/data';
     ```
   - Props:
     - `managerId` (string): manager ID like "MGR001"
     - `onClick` (function, optional): called when card/button clicked
     - `variant` (string, optional): 'border' | 'shadow', default 'border'
   - Get current timeframe from store (selective subscription)
   - Fetch manager data based on timeframe:
     ```javascript
     const timeframe = useTimeframeStore(state => state.timeframe);
     const timeframeData = getTimeframeData(timeframe);
     const manager = timeframeData.managers[managerId];
     ```
   - Render card matching App.jsx lines 179-233:
     ```jsx
     <div className={`bg-background-100 rounded-xl p-5 ${
       variant === 'shadow'
         ? 'shadow-[0_4px_12px_rgba(0,0,0,0.08)]'
         : 'border border-border'
     }`}>
       {/* Header: name, region, badge */}
       <div className="flex justify-between items-center mb-5">
         <div>
           <h3 className="text-base font-semibold text-foreground tracking-tight">
             {manager.name}
           </h3>
           <p className="text-xs text-gray-400 mt-0.5">{manager.region}</p>
         </div>
         <Badge trend={manager.trend} />
       </div>

       {/* Metrics row */}
       <div className="flex gap-8 mb-5">
         <MetricDisplay
           label="Attainment"
           value={manager.attainment}
           tooltip="Team quota attainment vs. target"
         />
         <MetricDisplay
           label="Coaching"
           value={manager.coaching_score}
           tooltip="Calls reviewed, commented, or scored"
         />
       </div>

       {/* AI Summary */}
       <p className="text-[13px] text-gray-500 leading-relaxed mb-5">
         {manager.ai_summary}
       </p>

       {/* Action button */}
       <button
         onClick={() => onClick?.(managerId)}
         className="h-10 px-4 bg-foreground text-background-100 rounded-md text-sm font-medium transition-all hover:bg-gray-700 active:scale-[0.98]"
       >
         View Details
       </button>
     </div>
     ```
   - Handle case where manager data is not found (render placeholder or null)

3. Create `src/components/cards/ManagerCard/index.js`:
   ```javascript
   export { ManagerCard } from './ManagerCard';
   ```

4. Create `src/components/cards/index.js` (barrel export):
   ```javascript
   export { ManagerCard } from './ManagerCard';
   ```

ManagerCard composes Badge, MetricDisplay, and reads from Zustand store. When timeframe changes globally, all ManagerCards automatically re-render with new data.
  </action>
  <verify>
    - File exists at correct path
    - ManagerCard renders all elements (name, region, badge, metrics, summary, button)
    - Component uses data from correct timeframe
    - Variant prop changes styling
  </verify>
  <done>
    - ManagerCard renders complete card UI
    - Metrics update when timeframe changes
    - onClick fires with managerId
    - border/shadow variants work
  </done>
</task>

<task type="auto">
  <name>Task 2: Create InsightSection component</name>
  <files>
    src/components/sections/InsightSection/InsightSection.jsx
    src/components/sections/InsightSection/index.js
    src/components/sections/index.js
  </files>
  <action>
1. Create `src/components/sections/InsightSection/` directory

2. Create `src/components/sections/InsightSection/InsightSection.jsx`:
   - Import { Badge } from '@/components/ui'
   - Props:
     - `title` (string): section title like "Coaching Investment"
     - `rating` (string, optional): 'improving' | 'declining' | 'steady'
     - `children` (ReactNode): section content
   - Render section with title bar and content area:
     ```jsx
     <section className="bg-background-100 border border-border rounded-xl overflow-hidden">
       {/* Header */}
       <div className="flex justify-between items-center px-5 py-4 border-b border-border">
         <h3 className="text-base font-semibold text-foreground tracking-tight">
           {title}
         </h3>
         {rating && <Badge trend={rating} />}
       </div>
       {/* Content */}
       <div className="p-5">
         {children}
       </div>
     </section>
     ```
   - Section is a container - content is passed as children for flexibility
   - Optional rating badge appears in header when provided

3. Create `src/components/sections/InsightSection/index.js`:
   ```javascript
   export { InsightSection } from './InsightSection';
   ```

4. Create `src/components/sections/index.js` (barrel export):
   ```javascript
   export { InsightSection } from './InsightSection';
   ```

InsightSection is used on Manager Detail page for each of the 5 coaching dimensions. Children can be text, lists, charts, or other components.
  </action>
  <verify>
    - All files created at correct paths
    - InsightSection renders title and optional badge
    - Children render in content area
    - Sections barrel exports InsightSection
    - `npm run build` succeeds
  </verify>
  <done>
    - InsightSection displays title with optional rating badge
    - Content area renders children
    - Geist styling matches design
    - Sections barrel: import { InsightSection } from '@/components/sections'
  </done>
</task>

</tasks>

<verification>
1. Run `npm run build` - should succeed
2. Verify file structure:
   ```
   src/components/
   ├── cards/
   │   ├── ManagerCard/
   │   │   ├── ManagerCard.jsx
   │   │   └── index.js
   │   └── index.js
   └── sections/
       ├── InsightSection/
       │   ├── InsightSection.jsx
       │   └── index.js
       └── index.js
   ```
3. ManagerCard uses other components correctly (Badge, MetricDisplay)
4. ManagerCard reads from Zustand store
</verification>

<success_criteria>
- ManagerCard displays name, region, trend badge, metrics, AI summary, action button
- ManagerCard re-renders when global timeframe changes
- InsightSection displays title, optional badge, and child content
- Both components use Geist styling
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-component-library/02-05-SUMMARY.md`
</output>
