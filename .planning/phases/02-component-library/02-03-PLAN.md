---
phase: 02-component-library
plan: 03
type: execute
wave: 2
depends_on: ["02-01", "02-02"]
files_modified:
  - src/components/display/MetricDisplay/MetricDisplay.jsx
  - src/components/display/MetricDisplay/index.js
  - src/components/display/Citation/Citation.jsx
  - src/components/display/Citation/index.js
  - src/components/display/index.js
autonomous: true

must_haves:
  truths:
    - "MetricDisplay renders label, value, unit, and optional tooltip"
    - "Citation renders as clickable link in CALL-XXXX format"
    - "Components use existing UI primitives (Tooltip, InfoIcon)"
  artifacts:
    - path: "src/components/display/MetricDisplay/MetricDisplay.jsx"
      provides: "Metric with label, value, unit, tooltip"
      exports: ["MetricDisplay"]
    - path: "src/components/display/Citation/Citation.jsx"
      provides: "Clickable citation link"
      exports: ["Citation"]
    - path: "src/components/display/index.js"
      provides: "Display components barrel"
      exports: ["MetricDisplay", "Citation"]
  key_links:
    - from: "src/components/display/MetricDisplay/MetricDisplay.jsx"
      to: "src/components/ui"
      via: "import Tooltip and InfoIcon"
      pattern: "import.*Tooltip.*InfoIcon.*from.*@/components/ui"
    - from: "src/components/display/Citation/Citation.jsx"
      to: "src/data"
      via: "import isValidCitationId for validation"
      pattern: "import.*isValidCitationId.*from.*@/data"
---

<objective>
Create display components: MetricDisplay for showing metrics with tooltips, and Citation for clickable call references.

Purpose: MetricDisplay is used in ManagerCard and detail pages. Citation is used throughout for linking to source calls. Both compose UI primitives from Plan 02.
Output: Working MetricDisplay and Citation components with display barrel export.
</objective>

<execution_context>
@/Users/ericgreene/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ericgreene/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-component-library/02-RESEARCH.md

# UI primitives to use
@src/components/ui/index.js

# Source patterns
@src/App.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MetricDisplay component</name>
  <files>
    src/components/display/MetricDisplay/MetricDisplay.jsx
    src/components/display/MetricDisplay/index.js
  </files>
  <action>
1. Create `src/components/display/MetricDisplay/` directory

2. Create `src/components/display/MetricDisplay/MetricDisplay.jsx`:
   - Import { Tooltip, InfoIcon } from '@/components/ui'
   - Props:
     - `label` (string): e.g., "Attainment", "Coaching"
     - `value` (number): the metric value
     - `unit` (string, optional): default '%'
     - `tooltip` (string, optional): tooltip content
   - Structure from App.jsx lines 194-207:
     ```jsx
     <div>
       <div className="flex items-center gap-1.5 mb-1">
         <p className="text-[11px] uppercase tracking-wider text-gray-400">{label}</p>
         {tooltip && (
           <Tooltip content={tooltip}>
             <span className="text-gray-300 hover:text-gray-500 cursor-help transition-colors">
               <InfoIcon />
             </span>
           </Tooltip>
         )}
       </div>
       <div className="flex items-baseline gap-1.5">
         <span className="text-2xl font-semibold text-foreground tabular-nums">{value}</span>
         <span className="text-sm text-gray-400">{unit}</span>
       </div>
     </div>
     ```

3. Create `src/components/display/MetricDisplay/index.js`:
   ```javascript
   export { MetricDisplay } from './MetricDisplay';
   ```

Use exact styling classes from App.jsx. The tabular-nums class ensures numbers align vertically.
  </action>
  <verify>
    - File exists at correct path
    - Component renders label, value, unit
    - Tooltip appears when tooltip prop provided
  </verify>
  <done>
    - MetricDisplay renders metric with Geist styling
    - Optional tooltip shows on info icon hover
    - Works without tooltip prop
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Citation component and display barrel</name>
  <files>
    src/components/display/Citation/Citation.jsx
    src/components/display/Citation/index.js
    src/components/display/index.js
  </files>
  <action>
1. Create `src/components/display/Citation/` directory

2. Create `src/components/display/Citation/Citation.jsx`:
   - Import { isValidCitationId } from '@/data'
   - Props:
     - `id` (string): citation ID like "CALL-1042"
     - `onClick` (function, optional): handler when citation clicked
   - Validate citation format using isValidCitationId
   - Render as clickable span/button:
     ```jsx
     <button
       onClick={() => onClick?.(id)}
       className="font-mono text-sm px-2 py-0.5 bg-gray-100 rounded border border-border text-foreground hover:bg-gray-200 hover:border-gray-300 transition-colors cursor-pointer"
     >
       {id}
     </button>
     ```
   - If invalid citation ID, render with warning style (text-error) or just render plain text
   - Add aria-label for accessibility: `aria-label={`View details for ${id}`}`

3. Create `src/components/display/Citation/index.js`:
   ```javascript
   export { Citation } from './Citation';
   ```

4. Create `src/components/display/index.js` (barrel export):
   ```javascript
   export { MetricDisplay } from './MetricDisplay';
   export { Citation } from './Citation';
   ```

Citation is styled like inline code but interactive. The font-mono class uses Geist Mono for consistent citation appearance.
  </action>
  <verify>
    - All files created at correct paths
    - Citation renders as clickable element
    - Display barrel exports both components
    - `npm run build` succeeds
  </verify>
  <done>
    - Citation component renders CALL-XXXX format
    - Click handler fires with citation ID
    - Invalid citations show warning or plain text
    - Display barrel works: import { MetricDisplay, Citation } from '@/components/display'
  </done>
</task>

</tasks>

<verification>
1. Run `npm run build` - should succeed
2. Verify file structure:
   ```
   src/components/display/
   ├── MetricDisplay/
   │   ├── MetricDisplay.jsx
   │   └── index.js
   ├── Citation/
   │   ├── Citation.jsx
   │   └── index.js
   └── index.js
   ```
3. Check that components use UI primitives correctly
</verification>

<success_criteria>
- MetricDisplay renders label, value, optional unit, optional tooltip
- Citation renders clickable call ID in monospace font
- Both components use Geist styling
- Display barrel provides clean imports
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-component-library/02-03-SUMMARY.md`
</output>
