---
phase: 06-claude-integration
plan: 04
type: execute
wave: 4
depends_on: ["06-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can enter API key and it persists"
    - "User can type question and see streaming response"
    - "Citations in response are clickable and open modal"
    - "Follow-up suggestions appear and work"
    - "Multiple questions work in same session"
    - "Error states display gracefully"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete Claude integration: API key entry, streaming chat, citation parsing, and follow-up suggestions.

Purpose: Confirm Phase 6 success criteria are met before marking phase complete.
Output: Verified working Ask Anything feature.
</objective>

<execution_context>
@/Users/ericgreene/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ericgreene/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-claude-integration/06-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete Claude integration with:
    - API key entry and persistence (ApiKeyInput component)
    - Streaming chat responses (useChat hook + ChatThread)
    - Inline citation parsing ([-> CALL-XXXX] rendered as clickable Citation)
    - Follow-up suggestions (FollowUpSuggestions component)
    - Conversation history within session (useChatStore)
  </what-built>
  <how-to-verify>
    1. Start dev server: `npm run dev`
    2. Navigate to http://localhost:5173/manager/sarah-chen

    **API Key Setup:**
    3. Look for "Ask Anything About Sarah Chen" section below the data
    4. Enter your Anthropic API key (get from console.anthropic.com)
    5. Click Save - verify key is masked as "sk-...XXXX"
    6. Refresh page - verify key persists (still shows masked)

    **Basic Chat:**
    7. Type "How is Sarah's coaching trending over time?" in the pinned input at bottom
    8. Click Ask - verify:
       - "Analyzing your coaching data..." loading indicator appears
       - Response streams in incrementally (typewriter effect)
       - Response appears in ChatThread section

    **Citations:**
    9. Ask "Show me examples of Sarah's feedback with call references"
    10. Verify response includes [-> CALL-XXXX] citations rendered as clickable buttons
    11. Click a citation - verify CitationModal opens with call details
    12. Close modal with ESC or backdrop click

    **Follow-up Suggestions:**
    13. After AI response completes, verify 2-3 follow-up suggestion chips appear
    14. Click a suggestion - verify it sends that question
    15. Verify streaming response appears for follow-up

    **Conversation History:**
    16. Verify previous messages remain visible in thread
    17. Ask a third question - verify full conversation history shown
    18. Navigate to dashboard, then back to manager - verify conversation clears (session only)

    **Error Handling:**
    19. Clear API key (click Change, then clear and save empty)
    20. Try to ask question - verify error message appears
    21. Re-enter valid API key to restore functionality
  </how-to-verify>
  <resume-signal>
    Type "approved" if all verifications pass.
    If issues found, describe what failed and I'll create a fix plan.
  </resume-signal>
</task>

</tasks>

<verification>
Phase 6 is complete when human verification passes.
</verification>

<success_criteria>
- All verification steps pass
- User confirms streaming chat works as expected
- User confirms citations open modal correctly
- User confirms follow-up suggestions function
- User confirms conversation history works within session
</success_criteria>

<output>
After completion, create `.planning/phases/06-claude-integration/06-04-SUMMARY.md`
</output>
