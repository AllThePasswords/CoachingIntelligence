---
phase: 04-manager-detail
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/ManagerDetail/ManagerDetail.jsx
autonomous: true

must_haves:
  truths:
    - "User sees manager name and region in hero section"
    - "User sees attainment % and coaching score % metrics"
    - "User sees AI-generated headline summary"
    - "User can navigate back to dashboard via back button"
    - "Direct URL to /manager/:managerId works"
    - "Timeframe toggle in hero updates metrics"
  artifacts:
    - path: "src/pages/ManagerDetail/ManagerDetail.jsx"
      provides: "Hero section with manager info, metrics, and timeframe toggle"
      contains: "TimeframeToggle"
  key_links:
    - from: "ManagerDetail.jsx"
      to: "getManagerById"
      via: "import and call with useParams managerId"
      pattern: "getManagerById\\(managerId\\)"
    - from: "ManagerDetail.jsx"
      to: "getSummaryByManager"
      via: "import for AI headline"
      pattern: "getSummaryByManager\\(managerId\\)"
    - from: "ManagerDetail.jsx"
      to: "useTimeframeStore"
      via: "selective subscription for timeframe-aware metrics"
      pattern: "useTimeframeStore"
---

<objective>
Build the hero section of the Manager Detail page with manager identity, key metrics, AI headline, timeframe toggle, and back navigation.

Purpose: This is the first content users see when viewing a manager's coaching profile. It orients them with identity (name, region) and key performance indicators (attainment, coaching score) before they dive into the five insight dimensions.

Output: ManagerDetail.jsx updated with complete hero section replacing the placeholder content.
</objective>

<execution_context>
@/Users/ericgreene/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ericgreene/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing components to use
@src/components/input/TimeframeToggle/TimeframeToggle.jsx
@src/stores/timeframeStore.js

# Data utilities
@src/data/managers.js
@src/data/summaries.js

# Current placeholder to replace
@src/pages/ManagerDetail/ManagerDetail.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Hero Section with Manager Info and Metrics</name>
  <files>src/pages/ManagerDetail/ManagerDetail.jsx</files>
  <action>
Replace the placeholder content in ManagerDetail.jsx with a complete hero section:

1. **Keep existing imports** (useParams, Link, getManagerById) and add:
   - `import { getSummaryByManager } from '@/data'`
   - `import { TimeframeToggle } from '@/components/input'`
   - `import { useTimeframeStore } from '@/stores'`
   - `import { getTimeframeData } from '@/data'`

2. **Add timeframe subscription** after getting manager:
   ```jsx
   const timeframe = useTimeframeStore(state => state.timeframe);
   const timeframeData = getTimeframeData(timeframe);
   ```

3. **Get summary data** after manager check:
   ```jsx
   const summary = getSummaryByManager(managerId);
   ```

4. **Replace placeholder section** with hero layout:
   - Back link stays at top (already styled correctly)
   - After manager check, render:
     - Row 1: Manager name (text-3xl font-bold) + TimeframeToggle (right-aligned)
     - Row 2: Region (text-gray-500)
     - Row 3: Metrics row with Attainment and Coaching Score in columns
     - Row 4: AI headline paragraph (mt-6, text-lg, text-gray-700)

5. **Metrics styling:**
   - Container: flex gap-8 mt-6
   - Each metric: label (text-xs uppercase tracking-wider text-gray-400 mb-1) + value (text-2xl font-bold)
   - Use timeframe-aware data: `timeframeData?.managers?.[managerId]?.coaching_score || manager.coaching_score`
   - Attainment: `{attainment}%`
   - Coaching Score: `{coachingScore}%`

6. **Add placeholder for content sections** below hero:
   ```jsx
   {/* Insight sections will be added in Plan 04-02 */}
   <div className="mt-8 space-y-6">
     <p className="text-sm text-gray-400 p-4 bg-background-100 border border-border rounded-lg">
       Insight sections coming in Plan 04-02
     </p>
   </div>
   ```

Keep the not-found state handling that already exists.
  </action>
  <verify>
Run `npm run build` - no errors. Run dev server and navigate to /manager/MGR001:
- See "Sarah Chen" as name
- See "West Region"
- See attainment and coaching score metrics
- See TimeframeToggle in header area
- Toggle timeframe and verify metrics text doesn't break
- Click back link returns to dashboard
  </verify>
  <done>Hero section displays manager identity, metrics with timeframe toggle, AI headline, and back navigation</done>
</task>

<task type="auto">
  <name>Task 2: Verify Deep Linking Works</name>
  <files>src/pages/ManagerDetail/ManagerDetail.jsx</files>
  <action>
Test and confirm deep linking functionality:

1. **Hard refresh test:** Navigate directly to http://localhost:5173/manager/MGR002 - should show Marcus Thompson
2. **Invalid ID test:** Navigate to /manager/INVALID - should show "Manager not found" state
3. **All managers test:** Verify each manager ID works:
   - /manager/MGR001 (Sarah Chen)
   - /manager/MGR002 (Marcus Thompson)
   - /manager/MGR003 (Jennifer Walsh)
   - /manager/MGR004 (David Park)

No code changes needed unless tests fail. If deep linking is broken, check that:
- BrowserRouter is wrapping App in main.jsx
- Route path="/manager/:managerId" exists in App.jsx
- useParams() is extracting managerId correctly
  </action>
  <verify>
Run dev server. Open browser directly to http://localhost:5173/manager/MGR003 (not navigating from dashboard). Jennifer Walsh should appear with her data. Refresh the page - same result.
  </verify>
  <done>Direct URL access to any manager detail page works without navigation from dashboard</done>
</task>

</tasks>

<verification>
After both tasks:
1. `npm run build` passes without errors
2. All 4 managers accessible via direct URL
3. Hero section shows correct data per manager
4. Timeframe toggle appears and is functional
5. Back link returns to dashboard
6. Not-found state works for invalid IDs
</verification>

<success_criteria>
- DETAIL-01: Hero shows name, region, attainment, coaching score
- DETAIL-02: AI headline visible below metrics
- DETAIL-12: TimeframeToggle present and functional
- NAV-02: Back button returns to dashboard
- NAV-03: Deep linking works for all managers
</success_criteria>

<output>
After completion, create `.planning/phases/04-manager-detail/04-01-SUMMARY.md`
</output>
