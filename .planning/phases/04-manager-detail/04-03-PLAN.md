---
phase: 04-manager-detail
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/components/tables/AETable/AETable.jsx
  - src/components/tables/AETable/index.js
  - src/components/tables/index.js
  - src/pages/ManagerDetail/ManagerDetail.jsx
autonomous: true

must_haves:
  truths:
    - "User sees AE table with columns: Name, Quota %, Calls Coached, Comments, Scorecards, Last Feedback, Flag"
    - "User sees undercoached flag on AEs with flag='undercoached'"
    - "User sees critical flag on AEs with flag='critical'"
    - "Flag styling matches Geist palette (warning for undercoached, error for critical)"
  artifacts:
    - path: "src/components/tables/AETable/AETable.jsx"
      provides: "Table component displaying AE coaching data"
      min_lines: 40
    - path: "src/components/tables/index.js"
      provides: "Barrel export for tables"
      exports: ["AETable"]
  key_links:
    - from: "AETable.jsx"
      to: "getAEsByManager"
      via: "import from @/data"
      pattern: "getAEsByManager\\(managerId\\)"
    - from: "ManagerDetail.jsx"
      to: "AETable"
      via: "import and render with managerId prop"
      pattern: "<AETable.*managerId"
---

<objective>
Build the AE coaching table showing each AE on the manager's team with their coaching metrics and flag status.

Purpose: The AE table lets users drill into team-level detail - seeing exactly who is being coached, who is undercoached, and who is in critical state. This is where aggregate insights become actionable.

Output: New AETable component in tables/ directory, integrated into ManagerDetail page.
</objective>

<execution_context>
@/Users/ericgreene/.claude/get-shit-done/workflows/execute-plan.md
@/Users/ericgreene/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Data structure for AEs
@src/data/aes.js

# Color tokens for flags
@src/styles/index.css

# Prior plan summary
@.planning/phases/04-manager-detail/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AETable Component</name>
  <files>
    src/components/tables/AETable/AETable.jsx
    src/components/tables/AETable/index.js
    src/components/tables/index.js
  </files>
  <action>
Create the AETable component in a new tables/ directory:

1. **Create directory structure:**
   - src/components/tables/AETable/AETable.jsx
   - src/components/tables/AETable/index.js
   - src/components/tables/index.js

2. **AETable.jsx implementation:**
   ```jsx
   /**
    * AETable - Display AE coaching data for a manager
    *
    * Shows each AE with quota, coaching metrics, and flag status
    * Simple semantic table - no library needed for 4-16 rows
    */
   import { getAEsByManager } from '@/data';

   // Flag styling using Geist semantic tokens
   const flagStyles = {
     undercoached: 'bg-warning/10 text-warning',
     critical: 'bg-error/10 text-error'
   };

   const flagLabels = {
     undercoached: 'Undercoached',
     critical: 'Critical'
   };

   export function AETable({ managerId }) {
     const aes = getAEsByManager(managerId);

     if (!aes || aes.length === 0) {
       return (
         <div className="text-gray-500 text-sm py-4">
           No AEs found for this manager.
         </div>
       );
     }

     return (
       <div className="overflow-x-auto">
         <table className="w-full">
           <thead>
             <tr className="border-b border-border text-left">
               <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">AE Name</th>
               <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Quota %</th>
               <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Calls Coached</th>
               <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Comments</th>
               <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Scorecards</th>
               <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Last Feedback</th>
               <th className="py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wider">Flag</th>
             </tr>
           </thead>
           <tbody className="divide-y divide-gray-100">
             {aes.map((ae) => (
               <tr key={ae.id} className="hover:bg-gray-50">
                 <td className="py-3 px-4 font-medium text-gray-900">{ae.name}</td>
                 <td className="py-3 px-4 text-gray-700">{ae.quota}%</td>
                 <td className="py-3 px-4 text-gray-700">{ae.calls_coached}</td>
                 <td className="py-3 px-4 text-gray-700">{ae.comments}</td>
                 <td className="py-3 px-4 text-gray-700">{ae.scorecards}</td>
                 <td className="py-3 px-4 text-sm text-gray-500">
                   {ae.last_feedback_date || 'Never'}
                 </td>
                 <td className="py-3 px-4">
                   {ae.flag && (
                     <span className={`text-xs px-2 py-1 rounded-md font-medium ${flagStyles[ae.flag]}`}>
                       {flagLabels[ae.flag]}
                     </span>
                   )}
                 </td>
               </tr>
             ))}
           </tbody>
         </table>
       </div>
     );
   }
   ```

3. **AETable/index.js:**
   ```jsx
   export { AETable } from './AETable';
   ```

4. **tables/index.js (barrel):**
   ```jsx
   export { AETable } from './AETable';
   ```
  </action>
  <verify>
Files exist at correct paths. Run `npm run build` - no errors.
  </verify>
  <done>AETable component created with 7 columns, flag styling using Geist tokens</done>
</task>

<task type="auto">
  <name>Task 2: Integrate AETable into ManagerDetail</name>
  <files>src/pages/ManagerDetail/ManagerDetail.jsx</files>
  <action>
Add the AETable to the ManagerDetail page:

1. **Add import:**
   ```jsx
   import { AETable } from '@/components/tables';
   ```

2. **Replace the AE table placeholder** (added in 04-02) with:
   ```jsx
   {/* AE Coaching Table */}
   <div className="mt-8">
     <h2 className="text-xl font-semibold text-foreground mb-4">Team Coaching Details</h2>
     <div className="bg-background-100 border border-border rounded-lg overflow-hidden">
       <AETable managerId={managerId} />
     </div>
   </div>

   {/* Sources footer will be added in Plan 04-04 */}
   <div className="mt-8 p-4 bg-background-100 border border-border rounded-lg">
     <p className="text-sm text-gray-400">Sources footer coming in Plan 04-04</p>
   </div>
   ```

The table should appear after the five insight sections.
  </action>
  <verify>
Run dev server. Navigate to /manager/MGR001:
- See table with 4 AEs (Alex Rivera, Emma Liu, Ryan Patel, Sofia Andersson)
- No flags (Sarah's team has no undercoached AEs)

Navigate to /manager/MGR002:
- See Lauren Kim with "Undercoached" flag (yellow/warning)

Navigate to /manager/MGR004:
- See Rachel Green, Tyler Morgan, Jessica Huang with "Critical" flags (red/error)
- See Brandon Lee with "Undercoached" flag
  </verify>
  <done>AETable renders on detail page showing AE coaching data with proper flags</done>
</task>

</tasks>

<verification>
After both tasks:
1. `npm run build` passes without errors
2. AETable barrel export works: `import { AETable } from '@/components/tables'`
3. Table shows 4 AEs per manager
4. All 7 columns populated correctly
5. Undercoached flags display with warning styling
6. Critical flags display with error styling
7. "Never" shows for AEs with no feedback date
</verification>

<success_criteria>
- DETAIL-08: AE table shows all columns (name, quota %, calls coached, comments, scorecards, last feedback, flag)
- DETAIL-09: Undercoached and critical flags display with appropriate styling
</success_criteria>

<output>
After completion, create `.planning/phases/04-manager-detail/04-03-SUMMARY.md`
</output>
